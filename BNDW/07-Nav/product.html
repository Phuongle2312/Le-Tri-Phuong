<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products</title>
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">üëü Football Shoes</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Trang ch·ªß</a></li>
                    <li class="nav-item">
                        <button class="btn btn-warning ms-3" data-bs-toggle="modal" data-bs-target="#cartModal">
                            üõí Gi·ªè h√†ng (<span id="cart-count">0</span>)
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Product Detail -->
    <section class="py-5 mt-5">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-6">
                    <img id="product-img" src="" class="img-fluid rounded shadow" alt="S·∫£n ph·∫©m">
                </div>
                <div class="col-md-6">
                    <h2 id="product-name"></h2>
                    <h4 class="text-danger fw-bold" id="product-price"></h4>
                    <p class="mt-3">‚ö° Gi√†y ƒë√° b√≥ng ch√≠nh h√£ng, m·∫´u m·ªõi nh·∫•t, ch·∫•t l∆∞·ª£ng cao d√†nh cho c·∫ßu th·ªß chuy√™n
                        nghi·ªáp v√† phong tr√†o.</p>
                    <button id="buy-now" class="btn btn-warning">Mua ngay</button>
                    <a href="index.html" class="btn btn-secondary ms-2">‚¨Ö Quay l·∫°i</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Cart Modal -->
    <div class="modal fade" id="cartModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-warning">
                    <h5 class="modal-title">üõí Gi·ªè h√†ng</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <table class="table text-center">
                        <thead>
                            <tr>
                                <th>S·∫£n ph·∫©m</th>
                                <th>Gi√°</th>
                                <th>S·ªë l∆∞·ª£ng</th>
                                <th>Th√†nh ti·ªÅn</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="cart-items">
                            <tr>
                                <td colspan="5">Gi·ªè h√†ng tr·ªëng</td>
                            </tr>
                        </tbody>
                    </table>
                    <h5 class="text-end">T·ªïng c·ªông: <span id="cart-total">0</span> ƒë</h5>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-success">Thanh to√°n</button>
                    <button class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white text-center py-3">
        <p>&copy; 2025 Football Shoes Shop | All Rights Reserved</p>
    </footer>

    <script src="../assets/css/bootstrap.min.css"></script>

    <script>
        // L·∫•y d·ªØ li·ªáu t·ª´ URL
        const urlParams = new URLSearchParams(window.location.search);
        const name = urlParams.get("name");
        const price = parseInt(urlParams.get("price"));
        const img = urlParams.get("img");

        document.getElementById("product-name").textContent = name;
        document.getElementById("product-price").textContent = price.toLocaleString() + " ƒë";
        document.getElementById("product-img").src = img;

        let cart = [];

        // Mua ngay
        document.getElementById("buy-now").addEventListener("click", function () {
            const item = cart.find(p => p.name === name);
            if (item) {
                item.quantity++;
            } else {
                cart.push({ name, price, quantity: 1 });
            }
            updateCart();
        });

        function updateCart() {
            const cartItems = document.getElementById("cart-items");
            const cartCount = document.getElementById("cart-count");
            const cartTotal = document.getElementById("cart-total");

            cartItems.innerHTML = '';
            let total = 0;

            if (cart.length === 0) {
                cartItems.innerHTML = '<tr><td colspan="5">Gi·ªè h√†ng tr·ªëng</td></tr>';
            } else {
                cart.forEach((item, index) => {
                    const row = `
            <tr>
              <td>${item.name}</td>
              <td>${item.price.toLocaleString()} ƒë</td>
              <td>${item.quantity}</td>
              <td>${(item.price * item.quantity).toLocaleString()} ƒë</td>
              <td><button class="btn btn-sm btn-danger" onclick="removeItem(${index})">X√≥a</button></td>
            </tr>
          `;
                    cartItems.innerHTML += row;
                    total += item.price * item.quantity;
                });
            }

            cartCount.textContent = cart.length;
            cartTotal.textContent = total.toLocaleString();
        }

        function removeItem(index) {
            cart.splice(index, 1);
            updateCart();
        }
    </script>
</body>

</html>